{% extends 'base.html' %}
{% load static %} 
{% load cart_tag %}


{% block css %} 
<link rel="stylesheet" href="{% static 'css/cart_style.css' %}">
{% endblock %}


{% block content %}
{% get_user_carts request as carts %}

<section class="main_section">
    <div class="container">
        <h2 class="main__title">Your cart ({{ carts.total_qty }} items)</h2>
        <div class="cart__label__wrap">
            <p class="cart__label cart__label_main">Item</p>
            <p class="cart__label">Price</p>
            <p class="cart__label">Quantity</p>
            <p class="cart__label">Total</p>
            <p class="cart__label"></p>
        </div>
        {% for cart in carts %}
        <div class="cart__item__wrap">
            <div class="cart__item__product__wrap">
                <img class="cart__item__product__img" src="{{ cart.product.image.url }}" alt="">
                <p class="cart__item__product__name">{{ cart.product.name }}</p>
            </div>
            <p class="cart__item__price cart__item">${{ cart.product.sell_price }}</p>
            <div class="cart__item__qty__wrap cart__item">
                <a href="{% url 'cart_change' cart.id 'plus' %}" class="cart__item__qty__btn">+</a>
                <p class="cart__item__qty">{{ cart.quantity }}</p>
                <a href="{% url 'cart_change' cart.id 'minus' %}" class="cart__item__qty__btn">-</a>
            </div>
            <p class="cart__item__total-price cart__item">${{ cart.product_price }}</p>
            <p class="cart__item__delete-link"><a href="{% url 'cart_remove' cart.id %}" class="material-icons">clear</a></p>
        </div>
        {% endfor %}
        <div class="cart__result__wrap">
            <div class="cart__result__item">
                <p class="cart__result__item__label">Subtotal:</p>
                <p class="cart__result__item__total">$1926</p>
            </div>
            <div class="cart__result__item">
                <p class="cart__result__item__label">Grand total:</p>
                <p class="cart__result__item__total cart__result__item__total_grand">${{ carts.total_price }}</p>
            </div>
        </div>
        <a href="#" class="cart__result__checkout">Check Out</a>

    </div>
</section>

{% endblock %}